function AbstractTabEditorController(a,b,c){a.i18nManager=c,a.tabs=b.getTabsOrNewTab(),a.isRemovable=function(a,b){return!a||b>1}}angular.module("crontabs").controller("EnabledCtrl",["$scope","i18nManager","CrontabsEnabledState","Messaging",function(a,b,c,d){function e(a){var c=a?"crontabsEnabled":"crontabsDisabled";return b(c)}a.enabledText=e(c.isEnabled()),a.enabled=c.isEnabled(),d.onMessage.addListener(function(b){b&&void 0!=b.enabled&&a.$apply(function(){a.enabledText=e(b.enabled),a.enabled=b.enabled})})}]),angular.module("crontabs").controller("EditorCtrl",["$scope","Messaging","TabStorage","TabOperations","TabTriggerTypes","i18nManager",function(a,b,c,d,e,f){function g(a){return{type:a,expression:"",operation:"show"}}AbstractTabEditorController(a,c,f),a.operations=d,a.types=e,a.addCron=function(a){a.crons.push(g("cron"))},a.addTextExpression=function(a){a.crons.push(g("text"))},a.removeCron=function(b,c){var d=[],e=b.crons;e.length>1&&(e.forEach(function(a){a!==c&&d.push(a)}),b.crons=d,a.editor.$setDirty())},a.removeTab=function(b){if(a.tabs.length>1){var c=[];a.tabs.forEach(function(a){a!==b&&c.push(a)}),a.tabs=c,a.editor.$setDirty()}},a.addTab=function(){a.tabs.unshift({url:"",crons:[g("cron")]})},a.onChangeOperation=function(a,b){a.operation=b.id},a.onSubmit=function(){c.setTabs(angular.copy(a.tabs)),b.sendMessage("saved"),a.editor.$setPristine()}}]),angular.module("crontabs").controller("TimeManagementCtrl",["$scope","Messaging","TabStorage","DaysOfWeek","i18nManager","TimeManagementService","TimeManagementTabService",function(a,b,c,d,e,f,g){AbstractTabEditorController(a,c,e),a.DaysOfWeek=d;var h=f.getTabs(a.tabs);a.compatibleTabs=h.compatible,a.removeTab=function(b){if(a.compatibleTabs.length>1){var c=[];a.compatibleTabs.forEach(function(a){a!==b&&c.push(a)}),a.compatibleTabs=c,a.editor.$setDirty()}},a.isDayRequired=function(a){return!a.days||0===a.days.length},a.addTab=function(){a.compatibleTabs.unshift(g.getNewTab())},a.onSubmit=function(){f.saveTabs(a.compatibleTabs,h.incompatible),a.editor.$setPristine()}}]);